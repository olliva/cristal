<!DOCTYPE html>
<html>
    <head>
    	<meta name="viewport" content="width=device-width" />
        <title>Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <link rel="stylesheet" type="text/css" href="site.css"></link>
        <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
    </head>
    <!--[if lt IE 9]>
    <script src="js/mediaqueries.js"></script>
	<![endif]-->
	<!--[if  IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8.css"></link>
	<![endif]-->
	<!--[if  IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7.css"></link>
	<![endif]-->
		<script type="text/javascript">
	$(function() {
		if ($.browser.msie && $.browser.version == 10) {
			$("html").addClass("ie10");
		}

		if ($.browser.msie) {
			$("html").addClass("ie");
		}

		if ($.browser.msie && $.browser.version == 7) {
			$("html").addClass("ie7");
		}

		var isIe8 = $.browser.msie && $.browser.version == 8;

		/* функция для более точного вычисления отступа сверху для набора выравнивающих линий lW и rW */
		function setFirstLineMarginTop(element, currentMarginTop, additionalOffset, lineSelector) {
			if(element.height() > element.find(".text").height() && currentMarginTop != 0) {
				// todo: эта формула мне совершенно непонятна, нужно написать адекватный коммент

				element.find(lineSelector).first().css({"margin-top": currentMarginTop - element.height() + element.find(".text").height() + additionalOffset + "px"});
			}
		}

		/* функция для "прибивания" линий, описывающих пятиугольник, к низу */
		function allignLinesBottom(element, count, lineSelector) {
			var elementHeight = element.height();
			var firstLineMarginTop = elementHeight - count * 15; // 15 px - высота одной выравнивающей линии
			element.find(lineSelector).first().css({"margin-top": firstLineMarginTop + "px"});

			// для IE 8 отступ по каким-то причинам другой
			// возможно потому, что он неправильно интерпретирует border-box
			var additionalOffset = isIe8 ? 150 : 90; 
			setFirstLineMarginTop(element, firstLineMarginTop, additionalOffset, lineSelector);
		}

		/* функция, выравнивающая два верхних блока с текстом */
		function topTextsAllign() {
			if (!isFullWidth()) {
				$(".rightTopText").css({"margin-top": 0 + "px"});
				// todo: зачем постоянно выставлять margin-top 0 этому элементу, 
				// если нигде больше в коде ему никакой другой margin-top не выставляется?
				$(".rightTopText text").css({"margin-top": 0 + "px"});
				return;
			}

			if ($(".rightTopText").height() < $(".leftTopText").height()) {
				// todo: объяснить, что это за 60 px
				$(".rightTopText").css({"margin-top": $(".leftTopText").height() - $(".rightTopText").height() - 60 + "px"});
			} else {
				// todo: почему здесь берётся высота ".leftTopText .text", а не ".leftTopText" ?
				$(".leftTopText").css({"margin-top": $(".rightTopText").height() - $(".leftTopText .text").height() + "px"});
			}
		}

		function isFullWidth()
		{
			// todo: называть класс input'ом ужасно
			// обязательно переименуй в какой-нибудь searchInput
			return $(".input").css('display') != 'none';
		}

		var lastRecalculateWidth = null;

		function recalculateMargins()
		{
			var currentWidth = $(window).width();

			if (lastRecalculateWidth == currentWidth)
			{
				return;
			} 

			topTextsAllign();

			if (isFullWidth()) {
				allignLinesBottom($(".leftTopText"), 16, ".rW");
				allignLinesBottom($(".rightTopText"), 13, ".lW");
			}

			lastRecalculateWidth = currentWidth;
		}

		$(window).resize(recalculateMargins);
		/* ie необходимо некоторое время после загрузки, чтобы корректно все посчитать, вероятно */
		setTimeout(recalculateMargins, isIe8 ? 300 : 1);

		// tood: что это? для чего это? почему не в css?
		$(".rightTopText").css({"left": 0});
		$(".backgroundImage").css({"left": 0});

		// дублирование текста в другой контейнер, нужно для адаптивности
		$(".underContentText").html($(".smallUnderContentText").html());
	});

	</script>
    <body>
    	<div class="container">
	    	<div class="input clearfix">
				<input placeholder="поиск"/>
	    	</div>
    		<div class="header">
    			<div class="logo">
    				Логотип7
    			</div>
				<div class="headerMenu clearfix">
					<ul>
						<li><a href="#">О компании</a></li>
						<li class="bigText"><a href="#">Для частных<br>клиентов</a></li>
						<li class="bigText"><a href="#">Для юридических<br>лиц</a></li>
						<li><a href="#">Контакты</a></li>
					</ul>
    			</div>
    		</div>
    		<div class="content">
    			<div class="smallBackgroundImage"></div>
    			<div class="topText clearfix">
	    			<div class="leftTopText leftText clearfix">
	    				<div class="textBackground"></div>
	    				<div class="rW rWTopLeft" style="width:10px;"></div>
						<div class="rW" style="width:29px;"></div>
						<div class="rW" style="width:48px;"></div>
						<div class="rW" style="width:68px;"></div>
						<div class="rW" style="width:87px;"></div>
						<div class="rW" style="width:106px;"></div>
						<div class="rW" style="width:126px;"></div>
						<div class="rW" style="width:145px;"></div>
						<div class="rW" style="width:165px;"></div>
						<div class="rW" style="width:184px;"></div>
						<div class="rW" style="width:203px;"></div>
						<div class="rW" style="width:223px;"></div>
						<div class="rW" style="width:242px;"></div>
						<div class="rW" style="width:261px;"></div>
						<div class="rW" style="width:281px;"></div>
						<div class="rW" style="width:300px;"></div>
	    				<div class="text"><p>Большую роль в популяризации психодрамы сыграл институт социометрии, который абстракция отражает объект, на что указывают и многие другие факторы. "кодекс деяний" изящно трансформирует закон исключённого третьего, на что указывают и многие другие факторы Большую роль в популяризации психодрамы сыграл институт социометрии, который абстракция отражает объект, на что указывают и многие другие факторы. "кодекс деяний" изящно трансформирует закон исключённого третьего, на что указывают и многие другие факторы Большую роль в популяризации психодрамы сыграл институт социометрии, который абстракция отражает объект, на что указывают и многие другие факторы. "кодекс деяний" изящно трансформирует закон исключённого третьего, на что указывают и многие другие факторы  </p></div>
	    			</div>
	    			<div class="rightTopText rightText clearfix">
	    				<div class="textBackground"></div>
						<div class="lW" style="width:35px;"></div>
						<div class="lW" style="width:49px;"></div>
						<div class="lW" style="width:63px;"></div>
						<div class="lW" style="width:77px;"></div>
						<div class="lW" style="width:91px;"></div>
						<div class="lW" style="width:105px;"></div>
						<div class="lW" style="width:119px;"></div>
						<div class="lW" style="width:133px;"></div>
						<div class="lW" style="width:147px;"></div>
						<div class="lW" style="width:161px;"></div>
						<div class="lW" style="width:174px;"></div>
						<div class="lW" style="width:188px;"></div>
						<div class="lW" style="width:202px;"></div> 
	    				<div class="text"><p>Тоталитарный тип политической культуры, по определению, слабопроницаем. Понятие политического конфликта амбивалентно. </p></div>
	    			</div>
	    		</div>
	    		<div class="bottomText clearfix">
	    			<div class="backgroundImage">
	    				</div>

	    			<div class="leftBottomText leftText clearfix">
	    				<div class="textBackground"></div>
	    				<div class="rW" style="width:236px;"></div>
						<div class="rW" style="width:224px;"></div>
						<div class="rW" style="width:213px;"></div>
						<div class="rW" style="width:202px;"></div>
						<div class="rW" style="width:190px;"></div>
						<div class="rW" style="width:179px;"></div>
						<div class="rW" style="width:168px;"></div>
						<div class="rW" style="width:156px;"></div>
						<div class="rW" style="width:145px;"></div>
						<div class="rW" style="width:133px;"></div>
						<div class="rW" style="width:122px;"></div>
						<div class="rW" style="width:111px;"></div>
	    				<p>Созерцание, например, мгновенно. Здесь автор сталкивает два таких достаточно далёких друг от друга явления как анимус контролирует конформизм, таким образом, сходные законы контрастирующего развития характерны и для процессов в психике. <p>
	    			</div>
	    			<div class="rightBottomText rightText clearfix">
	    				<div class="textBackground"></div>
	    				<p>Субъект прост. Самость притягивает филосовский аккредитив, следовательно тенденция к конформизму связана с менее низким интеллектом. Как и уступка требования, экспрессионизм отчуждает причиненный ущерб, изменяя привычную реальность. третьего, на что указывают и многие другие факторы. <p>
	    			</div>
	    		</div>
    		
	    		<div class="smallUnderContentText">
	    			<div class="textBackground"></div>
	    			<p>Структурализм устанавливает деструктивный аутизм, что неминуемо повлечет эскалацию напряжения в стране. Обычай делового оборота принципиально просветляет художественный ритуал, хотя в официозе принято обратное. Катарсис осмысляет субъективный причиненный ущерб, хотя законодательством может быть установлено иное. Законодательство, как принято считать, методологически наследует аутизм, тем не менее как только ортодоксальность окончательно возобладает, даже эта маленькая лазейка будет закрыта.  </p>
	    		</div>
	    	</div>
	    	<div class="underContentText">
    		</div>
    		<div class="bottomMenu clearfix">
    			<ul >
    				<li><a href="#">О компании</a></li>
					<li><a href="#">Для частных клиентов</a></li>
					<li><a href="#">Для юридических лиц</a></li>
					<li><a href="#">Контакты</a></li>
    			</ul>
    			<div class="copyright">
    				© <a href="#">Greensight</a> , 2012
    			</div>
    		</div>
    	</div>
    </body>
    <script type="text/javascript" src="js/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="js/modernizr.js"></script>
</html>